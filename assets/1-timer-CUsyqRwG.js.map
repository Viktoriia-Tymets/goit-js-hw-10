{"version":3,"file":"1-timer-CUsyqRwG.js","sources":["../../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport iziToast from \"izitoast\";\n\n\nconst datePicker = document.querySelector(\"#datetime-picker\");\nconst startBtn = document.querySelector(\"[data-start]\");\nconst daysEl = document.querySelector(\"[data-days]\");\nconst hoursEl  = document.querySelector(\"[data-hours]\");\nconst minutesEl = document.querySelector(\"[data-minutes]\");\nconst secondsEl = document.querySelector(\"[data-seconds]\");\n\n\nlet timerId = null;\nlet userSelectedDate = null;\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n      console.log(selectedDates[0]); \n    \n    const selectedDate = selectedDates[0];\n    const now = new Date();\nif (selectedDate <= now) {\n    iziToast.error({\n        title: 'Error',\n        message: 'Please choose a date in the future',\n        position: 'topRight',\n    });\n    startBtn.disabled = true;\n} else {\n    userSelectedDate = selectedDate;\n    startBtn.disabled = false;\n}\n    },\n\n  };\n\n\n  flatpickr(datePicker, options);\n  function addLeadingZero(value) {\n    return String(value).padStart(2, \"0\")\n  };\n  \n  function updateTimer({days, hours, minutes, seconds}) {\n    daysEl.textContent = addLeadingZero(days);\n    hoursEl.textContent = addLeadingZero(hours);\n    minutesEl.textContent = addLeadingZero(minutes);\n    secondsEl.textContent = addLeadingZero(seconds);\n  };\n\n  function convertMs(ms) {\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    const days = Math.floor(ms / day);\n    const hours = Math.floor((ms % day) / hour);\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n  \n    return { days, hours, minutes, seconds };\n\n  };\n\n  startBtn.addEventListener('click', () => {\n    if (!userSelectedDate) \n        return;\n    startBtn.disabled = true;\n    datePicker.disabled = true;\n\n    timerId = setInterval(() => {\n        const now = new Date();\n        const deltaTime = userSelectedDate - now;\n\n        if (deltaTime <= 0) {\n            clearInterval(timerId);\n            iziToast.success({\n                title: 'Success',\n                message: 'Time is up!',\n                position: 'topRight',\n            });\n\nupdateTimer({days: 0, hours: 0, minutes: 0, seconds: 0});\ndatePicker.disabled = false;\nreturn;\n}\nconst timeComponents = convertMs(deltaTime);\nupdateTimer(timeComponents);\n},1000)\n  });\n  "],"names":["datePicker","startBtn","daysEl","hoursEl","minutesEl","secondsEl","timerId","userSelectedDate","options","selectedDates","selectedDate","iziToast","flatpickr","addLeadingZero","value","updateTimer","days","hours","minutes","seconds","convertMs","ms","deltaTime","timeComponents"],"mappings":"2CAIA,MAAMA,EAAa,SAAS,cAAc,kBAAkB,EACtDC,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAS,SAAS,cAAc,aAAa,EAC7CC,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAY,SAAS,cAAc,gBAAgB,EACnDC,EAAY,SAAS,cAAc,gBAAgB,EAGzD,IAAIC,EAAU,KACVC,EAAmB,KAEvB,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,QAAQ,IAAIA,EAAc,CAAC,CAAC,EAE9B,MAAMC,EAAeD,EAAc,CAAC,EAEpCC,GADY,IAAI,MAEhBC,EAAS,MAAM,CACX,MAAO,QACP,QAAS,qCACT,SAAU,UAClB,CAAK,EACDV,EAAS,SAAW,KAEpBM,EAAmBG,EACnBT,EAAS,SAAW,GAEnB,CAEL,EAGEW,EAAUZ,EAAYQ,CAAO,EAC7B,SAASK,EAAeC,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CAExC,CACE,SAASC,EAAY,CAAC,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAG,CACpDjB,EAAO,YAAcW,EAAeG,CAAI,EACxCb,EAAQ,YAAcU,EAAeI,CAAK,EAC1Cb,EAAU,YAAcS,EAAeK,CAAO,EAC9Cb,EAAU,YAAcQ,EAAeM,CAAO,CAElD,CACE,SAASC,EAAUC,EAAI,CAMrB,MAAML,EAAO,KAAK,MAAMK,EAAK,KAAG,EAC1BJ,EAAQ,KAAK,MAAOI,EAAK,MAAO,IAAI,EACpCH,EAAU,KAAK,MAAQG,EAAK,MAAO,KAAQ,GAAM,EACjDF,EAAU,KAAK,MAASE,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CAG1C,CACElB,EAAS,iBAAiB,QAAS,IAAM,CAClCM,IAELN,EAAS,SAAW,GACpBD,EAAW,SAAW,GAEtBM,EAAU,YAAY,IAAM,CAExB,MAAMgB,EAAYf,EADN,IAAI,KAGhB,GAAIe,GAAa,EAAG,CAChB,cAAchB,CAAO,EACrBK,EAAS,QAAQ,CACb,MAAO,UACP,QAAS,cACT,SAAU,UAC1B,CAAa,EAEbI,EAAY,CAAC,KAAM,EAAG,MAAO,EAAG,QAAS,EAAG,QAAS,CAAC,CAAC,EACvDf,EAAW,SAAW,GACtB,MACA,CACA,MAAMuB,EAAiBH,EAAUE,CAAS,EAC1CP,EAAYQ,CAAc,CAC1B,EAAE,GAAI,EACN,CAAG"}